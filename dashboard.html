<script type="text/ng-template" id="dashboard">
    {{ $toolbar.thisTerm | termTitle }}
</script>

<script type="text/ng-template" id="updates_card">
    <md-list-item class="md-2-line removeable" ng-repeat="update in $ls.updates | orderBy: '-time'">
        <div class="md-list-item-text">
            <h3>{{ update.title }}</h3>
            <p>{{ $ls.courses[update.course].title }}</p>
        </div>
        <div class="md-list-item-text align-right">
            <h3>{{ update.time | timeDistance }}</h3>
            <p class="md-caption">{{ update.event }}</p>
        </div>
        <div class="md-secondary">
            <md-button class="md-icon-button" ng-click="dismissUpdate(update.dismiss)">
                <md-icon md-font-icon="fa fa-trash fa-1x"></md-icon>
            </md-button>
        </div>
    </md-list-item>
</script>
<script type="text/ng-template" id="emails_card">
    <md-list-item class="md-2-line removeable" ng-repeat="email in $ls.emails['personal'] | orderBy: '-time'" style="position: relative">
        <div class="md-avatar-icon fix-icon" md-colors="{background: 'blue-grey-400'}" style="min-width: 36px">
            {{ $parent.getInitials(email.sender) }}
        </div>
        <div class="md-list-item-text">
            <h3>{{ email.title || "No Title" }}</h3>
            <p>{{ email.sender }}</p>
        </div>
        <div class="md-list-item-text align-right">
            <h3>{{ email.time | timeDistance }}</h3>
            <p class="md-caption">{{ email.event | limitTo: 12 }}</p>
        </div>
        <div class="md-secondary">
            <md-button class="md-icon-button" ng-click="deleteEmail(email.id)">
                <md-icon md-font-icon="fa fa-trash fa-1x"></md-icon>
            </md-button>
        </div>
        <span class="list-button" ng-click="goToEmail(email.id)"></span>
    </md-list-item>
</script>
<script type="text/ng-template" id="deadlines_card">
    <md-list-item class="md-2-line" ng-class="beforeDue(deadline.dueDate) ? 'removeable' : 'archived'"
                  ng-repeat="deadline in $ls.deadlines | orderBy: '-dueDate'">
        <div class="md-list-item-text" flex>
            <h3>{{ deadline.title }}</h3>
            <p>{{ $ls.courses[deadline.course].title }}</p>
        </div>
        <div class="md-list-item-text align-right">
            <h3>{{ deadline.dueDate | timeDistance }}</h3>
            <p class="md-caption">Due {{ deadline.dueDate | date: 'shortTime' }}</p>
        </div>
        <div class="md-secondary">
            <md-button class="md-icon-button" submit="{{ deadline.courseId }}/{{ deadline.contentId }}/">
                <md-icon md-font-icon="fa fa-upload fa-1x"></md-icon>
                <input type="file" style="display: none" multiple>
            </md-button>
        </div>
    </md-list-item>
</script>
<script type="text/ng-template" id="finals_card">
    <md-list-item class="md-2-line" ng-repeat="final in $ls.finals | orderBy: 'date'" ng-click="null">
        <div class="md-list-item-text">
            <h3>{{ $ls.courses[final.course].title }}</h3>
            <p>{{ final.start }} -> {{ final.end }}</p>
        </div>
        <div class="md-list-item-text align-right fixed-56-width">
            <h3>{{ parseDate(final.date) | date: 'MMM, dd' }}</h3>
            <p class="md-caption">{{ final.location }}</p>
        </div>
    </md-list-item>
</script>
<script type="text/ng-template" id="classes_card">
    {{ classes = todayClasses(); '' }}
    <md-list-item ng-if="classes.length == 0">You have no classes today :D</md-list-item>
    <md-list-item ng-repeat="class in classes | orderBy: 'points[0].y'" ng-click="null"
                  md-colors="{borderColor: class.color}" class="md-2-line today-classes">
        <div class="md-list-item-text">
            <h3>{{ class.start }}</h3>
            <h3>{{ class.end }}</h3>
        </div>
        <div class="md-list-item-text">
            <h3>
                <md-icon md-font-icon="fa fa-map-marker" md-colors="{color: 'grey-800'}"></md-icon>
                {{ class.location }}
            </h3>
            <p>{{ class.title }}</p>
        </div>
    </md-list-item>
</script>
<script type="text/ng-template" id="grades_card">
    <md-list-item class="md-2-line" ng-repeat="grade in $ls.grades | orderBy: '-time'" ng-click="null">
        <div class="md-list-item-text" flex>
            <h3>{{ grade.title }}</h3>
            <p>{{ $ls.courses[grade.course].title }}</p>
        </div>
        <div class="md-secondary md-avatar-icon fix-icon" style="margin-right: 0"
             md-colors="{background: (grade | gradeColor) + '-600', color: 'grey-50'}">
            <span style="line-height: 28px; margin-left: -2px;">
                {{ grade.grade }}<sub style="font-size: 12px">/<sub>{{ grade.outOf }}</sub></sub>
            </span>
        </div>
    </md-list-item>
</script>
<script type="text/ng-template" id="holds_card">
    <md-list-item ng-if="$ls.holds">You have no holds. Yay!</md-list-item>
    <md-list-item ng-repeat="hold in $ls.holds" class="md-2-line" ng-click="null">
        <div class="md-list-item-text">
            <h3>{{ hold.reason }}</h3>
            <p>{{ hold.type }}</p>
        </div>
        <div class="md-list-item-text" style="max-width: 60px; text-align: center">
            <h3>{{ hold.end | date: 'MMM, dd' }}</h3>
            <p>{{ hold.end | date: 'yyyy' }}</p>
        </div>
    </md-list-item>
</script>

<div layout="row" flex-gt-xs="60" layout-xs="column">
    <card ng-repeat="card in mainCards" template="card"></card>
</div>
<div layout="row" flex-gt-xs="40" layout-xs="column">
    <card ng-repeat="card in subCards" template="card"></card>
</div>

<html ng-app="UOSHUB" ng-cloak>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>UOS HUB</title>
        <base href="/">
        <!--INCLUDES-->
    </head>
    <body ng-controller="layout" layout="row" md-colors="::{background: 'accent-50'}">
        <md-sidenav id="sidenav" class="md-sidenav-left" ng-class="{'open': $ls.loggedIn, 'tight': $ls.loggedIn && $ls.tightNav}"
                    md-whiteframe="1" md-is-locked-open="$mdMedia('gt-xs')" flex-none>
            <md-toolbar layout="row" layout-align="start center" md-colors="::{background: 'grey-A100'}">
                <md-icon md-svg-icon="logo" md-colors="::{fill: 'accent-800'}"></md-icon>
                <b md-colors="::{color: 'accent-800'}">UOS</b>
                <span md-colors="::{color: 'primary-800'}">HUB</span>
            </md-toolbar>
            <md-content md-colors="::{background: 'accent-900'}" flex>
                <md-list flex>
                    <md-list-item class="md-1-line" ng-repeat="link in links" ng-click="redirect('/' + link.title + '/')"
                                  md-colors="{background: $loc.path() == '/' + link.title + '/' ? 'accent-700' : 'accent-900'}">
                        <md-icon md-font-icon="fa fa-{{ link.icon }} fa-fw" class="md-avatar-icon"></md-icon>
                        <div class="md-list-item-text" flex>
                            <p class="md-title">{{ capitalize(link.title) }}</p>
                        </div>
                    </md-list-item>
                </md-list>
            </md-content>
        </md-sidenav>

        <div layout="column" flex>
            <md-toolbar md-whiteframe="1" md-colors="::{background: 'grey-A100'}">
                <div class="md-toolbar-tools" id="toolbar">
                    <md-button ng-show="$ls.loggedIn" class="md-icon-button md-accent md-hue-3"
                               ng-click="$ls.tightNav = !$ls.tightNav" style="margin-right: 16px">
                        <md-icon md-font-icon="fa fa-bars fa-lg"></md-icon>
                    </md-button>
                    <md-button ng-hide="$ls.loggedIn" class="md-accent md-hue-2" ng-click="redirect('/calendar/')">Academic Calendar</md-button>
                    <md-select ng-show="$loc.path() == '/schedule/'" ng-model="$ls.semester" flex="25">
                        <md-option ng-repeat="semester in semesters track by $index" ng-value="$index" ng-disabled="$index > 1">{{ semester }}</md-option>
                    </md-select>
                    <md-select ng-show="$loc.path() == '/courses/'" ng-model="$ls.course" flex="25">
                        <md-option ng-repeat="(id, course) in $ls.semesters[$ls.semester]" ng-value="id">{{ course.name }}</md-option>
                    </md-select>
                    <span flex></span>
                    <md-button ng-show="$loc.path() == '/schedule/'" class="md-accent md-hue-2" ng-click="$ls.semester = -1">Design Your Schedule</md-button>
                    <md-button ng-show="$loc.path() == '/email/'" class="md-accent md-hue-2" ng-click="null">Write a new Email</md-button>
                    <md-button ng-show="$loc.path() == '/calendar/'" class="md-accent md-hue-2" ng-click="setDirection('vertical')">List View</md-button>
                    <md-button ng-show="$loc.path() == '/calendar/'" class="md-accent md-hue-2" ng-click="setDirection('horizontal')">Table View</md-button>
                    <h2 ng-show="$ls.sid" md-colors="::{color: 'accent-800'}">Welcome {{ $ls.sid }}</h2>
                    <md-button ng-if="!$ls.loggedIn" class="md-primary md-hue-2" ng-click="login($event)">Login</md-button>
                    <md-button ng-if="$ls.loggedIn" class="md-primary md-hue-2" ng-click="logout()">Logout</md-button>
                </div>
            </md-toolbar>
            <div id="content" layout="row" flex>
                <ng-view layout="column" flex ng-cloak></ng-view>
                <div id="right-margin" ng-class="{'inflate': !$ls.loggedIn}"></div>
            </div>
        </div>

        <script type="text/ng-template" id="login-dialog">
            <md-dialog flex="20" md-colors="{background: 'default-grey-A100'}">
                <form layout="column" class="no-margin" ng-submit="hide()">
                    <md-toolbar flex="10">
                        <div class="md-toolbar-tools" flex>
                            <span flex>Welcome to UOS HUB</span>
                            <md-button class="md-icon-button" ng-click="cancel()">
                                <md-icon md-font-icon="fa fa-times fa-lg"></md-icon>
                            </md-button>
                        </div>
                    </md-toolbar>
                    <md-dialog-content layout-margin>
                        <br>
                        <div layout-margin layout="column">
                            <md-input-container>
                                <label>Student ID</label>
                                <input ng-model="$ls.sid" required>
                            </md-input-container>
                            <md-input-container>
                                <label>Password</label>
                                <input ng-model="$ls.pin">
                            </md-input-container>
                            <md-button type="submit" class="md-raised md-primary">Login</md-button>
                        </div>
                    </md-dialog-content>
                </form>
            </md-dialog>
        </script>
    </body>
</html>